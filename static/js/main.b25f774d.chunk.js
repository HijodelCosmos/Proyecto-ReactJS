(this["webpackJsonpmi-tienda"]=this["webpackJsonpmi-tienda"]||[]).push([[0],{28:function(t,e,c){},37:function(t,e,c){},38:function(t,e,c){},43:function(t,e,c){},45:function(t,e,c){},46:function(t,e,c){},48:function(t,e,c){"use strict";c.r(e);var n=c(1),s=c(2),a=c.n(s),i=c(30),r=c.n(i),o=(c(37),c(6)),j=c(5),l=(c(38),c(21)),d=c(3),b=a.a.createContext(),u=function(t){var e=t.children,c=Object(s.useState)(0),a=Object(d.a)(c,2),i=a[0],r=a[1],o=Object(s.useState)([]),j=Object(d.a)(o,2),u=j[0],A=j[1],O=Object(s.useState)(0),h=Object(d.a)(O,2),m=h[0],x=h[1];return Object(n.jsx)(b.Provider,{value:{count:i,itemsInCart:u,totalPrice:m,addItem:function(t,e){r(i+e),x(m+t.price*e),t.cartcount=e,A([].concat(Object(l.a)(u),[t])),console.log("Usted Agrego "+e+" items al carrito")},isInCart:function(t){return!!u.find((function(e){return e.id===t}))},removeItem:function(t,e){var c=u.find((function(e){return e.id===t}));if(-1!==u.findIndex((function(e){return e.id===t}))){var n=u.map((function(t){return t===c&&(t.cartcount=t.cartcount-e),t}));if(A(n),console.log(n),r(i-e),x(m-c.price*e),console.log("Item Borrado"),0===c.cartcount){var s=u.filter((function(e){return e.id!==t&&e}));A(s)}}},clearCart:function(){x(0),r(0),A([]),console.log("El carrito vaciado exitosamente")}},children:e})},A=function(){var t=Object(s.useContext)(b).count;return Object(n.jsxs)("div",{children:[Object(n.jsx)("img",{className:"m-2 ".concat(t>0&&"tada"),src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAMAAAD04JH5AAAAA3NCSVQICAjb4U/gAAAACXBIWXMAAAN2AAADdgF91YLMAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAASlQTFRF////K1J/K1F+K1F9Jk+BJE+CHE2HHk2GJ0pzM0lkJkduJkZtNEhiKERoI0NoMUVfIkFlMkRcID5hIDxeID1fLj9VHzpaLT1SKjZIGS9JMD9TFipBHSo7JURqFSc8Hyg0HycyESAzESAxCCA8DB0vHSQtDBwvBx44GyEqEDlrKjA6DBYiEDtuBBUpMjdAAAAAAAEBAAIEAB0/ACpcAC5mADFqAEebAQIDAQMFAR5AATNsAUicAgIDAgQHAkqeCAgJDRAUDxwrEDtuEFitEkF6ElqvExQXE1yxFEN8FRUXFSc9FSk/FTNWFkyMFyxEFzVZF0+RGxsdGzNPG2S6Hme9I0JnJFaTJ1uXNDM2NGGXNH7WODk/OTg8OWunOYTcPHGvT05TV1ZcV6T/j/d8kQAAAC90Uk5TAAQKEBITFxdVamtwdHmHh5KUoKamrbK40NXV4eTm5+zu7/Dz8/P09fX4+Pn5+/zz9zhoAAABpklEQVR42u3ax1ICQRSFYRQTBhQzYgAMYMSIOYs5A2ZFef+HcDGnqe5xmnGQZNX5l7cvPV+xmGKBK2Zq2FXmCCCAgIoDOkx1BlBtuSXIK74KNwEEEEAAAQRUGhAO5WtsFmk3xMJE3ntCekCZIoAAAn4AmvxoFRvnaatuFlFa1zoWLi1Pr7WAXNvYeM5a9RFHWV07WHixPH0ngAACCCCAAAL+AWANGwdJqxICkNS1iYVDy9Mje8ACNpbipWiZAAIIsAeMRowmT42uUnIn4qaULvEeSCjTW9w2g9sjLtv8oF4U5U14j9sC9g8mgAACCCCAAAIIIIAAAqoOsJ+Re1xBGV0bWHhQpkPDRr3OAcXJ+/sHE0AAAVUHCLvl6hqQW1cjFuqVaU3hgJDzjxYnAgggoLnbqEv8t2MkKOe3a1BZby0c0lKUN2EPAQQQUDigTdxxfCYnptPm/2rO42BPWR/wGXmcA3ziUZ9fcmLaZ97fwsGTsn6HaZQAAggggAACnAM8UfT6Jiem7eb9cRzMKetTmPY7B+TajcnZrgeV9T/8HiCAAAJKBPgGWNJ5bXIsYBcAAAAASUVORK5CYII=",width:"60",alt:"Cart Icon"}),Object(n.jsx)("span",{className:"badge badge-danger badge-pill ".concat(t>0?"d-inline":"d-none"),children:t})]})},O=c.p+"static/media/logo.7dcd2f3e.png",h=function(){return Object(n.jsx)("header",{children:Object(n.jsx)("nav",{id:"navBar",className:"container align-items-start",children:Object(n.jsxs)("div",{className:"row justify-content-center align-items-end",children:[Object(n.jsxs)("div",{className:"row col-5 mt-2 align-items-end",children:[Object(n.jsx)(o.b,{to:"/",children:Object(n.jsx)("img",{src:O,height:"100",alt:"Wizard Icon"})}),Object(n.jsx)(o.b,{to:"/",children:Object(n.jsx)("h1",{id:"navBar--title",className:"col-2 m-0 pt-0",children:"MAGIC TENT"})})]}),Object(n.jsx)("div",{className:"col-5",children:Object(n.jsxs)("ul",{id:"navBar--menu",children:[Object(n.jsx)("li",{className:"navBar--item",children:Object(n.jsx)(o.b,{to:"/",href:"./#home",children:"Home"})}),Object(n.jsx)("li",{className:"navBar--item",children:Object(n.jsx)("a",{href:"./#support",children:"About Us"})}),Object(n.jsxs)("li",{className:"navBar--item deploy_trigger",children:["Categories",Object(n.jsxs)("ul",{className:"deploy_menu",children:[Object(n.jsx)("li",{children:Object(n.jsx)(o.b,{to:"/category:Potion",children:"Potions"})}),Object(n.jsx)("li",{children:Object(n.jsx)(o.b,{to:"/category:Staff",children:"Staffs"})}),Object(n.jsx)("li",{children:Object(n.jsx)(o.b,{to:"/category:Cloak",children:"Cloaks"})})]})]})]})}),Object(n.jsx)("div",{className:" col-2",children:Object(n.jsx)(o.b,{to:"/cart",children:Object(n.jsx)(A,{})})})]})})})},m=(c(43),c(16)),x=function(t){var e=t.itemData,c=t.handlerClick,i=e&&e.stock,r=Object(s.useState)(!1),o=Object(d.a)(r,2),j=o[0],l=o[1],b=Object(s.useState)(!1),u=Object(d.a)(b,2),A=u[0],O=u[1],h=Object(s.useState)(!1),m=Object(d.a)(h,2),x=m[0],g=m[1],f=Object(s.useState)(i),p=Object(d.a)(f,2),C=p[0],N=p[1],v=Object(s.useState)(0),I=Object(d.a)(v,2),y=I[0],B=I[1];return Object(s.useEffect)((function(){N(i-y),O(y>=i),l(y<=0),g(y<=0)}),[y]),Object(n.jsxs)(a.a.Fragment,{children:[Object(n.jsxs)("h6",{className:"text-left",children:["Stock : ",C]}),Object(n.jsxs)("div",{className:"row justify-content-between",children:[Object(n.jsx)("button",{className:"btn btn-sm btn-danger",disabled:j,type:"button",onClick:function(){y>0&&B(y-1)},children:Object(n.jsx)("h4",{children:"-"})}),Object(n.jsx)("h3",{children:y}),Object(n.jsx)("button",{className:"btn btn-sm btn-success",disabled:A,type:"button",onClick:function(){y<i&&B(y+1)},children:Object(n.jsx)("h4",{children:"+"})})]}),Object(n.jsx)("div",{className:"row justify-content-center",children:Object(n.jsx)("button",{onClick:function(){return c(e,y)},type:"button",className:"btn btn-primary m-1 ",disabled:x,children:"Add to Cart"})})]})},g=(c(28),function(){return Object(n.jsx)(o.b,{to:"/cart",children:Object(n.jsx)("div",{className:"d-flex justify-content-center",children:Object(n.jsx)("button",{type:"button",className:"purchaseButton btn btn-success btn-lg text-center mt-4",children:"Complete Purchase!"})})})}),f="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAMAAAD04JH5AAAAA3NCSVQICAjb4U/gAAAACXBIWXMAAAN2AAADdgF91YLMAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAIRQTFRF////eWkhbV8eaFocRDsTQTgSY1cbZFcbWU4ZUUYWU0gXAAAABwYCFxQGHxsJIR0JNzAPPzcRQjkSST8USkAUT0UWb2Eed2gheGghe2sifW0ij3wnlYIpl4MpoYwsp5Eur5gws5wxv6Y0x60348Y+58k/681B8dJC99dE+NhE/dxF/95GulNanwAAAAt0Uk5TADBwh93h4eHk/f3wOGBsAAABdElEQVR42u3b21LCMBAG4NKDllqQqkWrQhUFC3n/9/Oiu8xQJ0PibIip/3+dw5eZMqTpJopME99YJI7kAwAAAFwckGanyVuL5IPO6S8A5WBRlbJINehcAgAAAObzThJKUZ+msQE0g85THnVyFpAwulOC6XjUZEyA98c+r74AS2q4AAAAGUBa9ik6ipIEKB61oGl+7lAyGq42/m1bATg1dcoACBmwXvW5ox63q2PWFwHM9K8DMwAAAMAl4MD/J/NSmzm3OTgAbHiZW/36ttxmExAgpuRVn8YtoKFprnjeiLu05x4fGQCn5ZYAACAL2L9Rdp4A5gEAAAAACBHw+UJ5Wmrz7BIgsysGAAAAJAAPC23uPyhfLgHK06YUAAAAAAAAAHZ8+LDHEQ0AIwN4Oqy+Ph5W43tBOJ9sZF5MAAAAgFGUcHBQxjM2ABezTX0Vs6GeEIAAAd4Lm20SEsBNeX9hXt6PGxYAAPB3AN6v++HGJQAA/BfANzibdUc+fSCIAAAAAElFTkSuQmCC",p=function(t){var e=t.itemData,c=Object(s.useContext)(b),a=c.isInCart,i=c.addItem;return Object(n.jsxs)("div",{className:"card col-12 col-sm-10 col-md-12 col-lg-4 mb-3 mt-5 rounded-lg",children:[Object(n.jsxs)("div",{className:"card-body text-center",children:[Object(n.jsx)("h3",{className:"card-title ",children:e.title}),Object(n.jsx)("h6",{className:"card-subtitle mb-2 text-muted",children:e.category}),Object(n.jsx)("img",{src:e.src,className:"m-2 img-fluid",width:"150",alt:"Descripcion de producto"}),Object(n.jsx)("p",{className:"card-text",children:e.description})]}),Object(n.jsxs)("div",{className:"text-center mb-2",children:[Object(n.jsxs)("h3",{children:[Object(n.jsx)("img",{src:f,width:"27",alt:"Coin Logo"}),"  ",e.price]}),Object(n.jsx)(o.b,{to:"/item:".concat(e.id),children:Object(n.jsx)("button",{type:"button",className:"btn btn-primary ",children:"More Info"})})]}),Object(n.jsx)("div",{className:"card-footer",children:a(e.id)?Object(n.jsx)(g,{}):Object(n.jsx)(x,{itemData:e,handlerClick:i})})]})},C=function(t){var e=t.data;return Object(n.jsx)("div",{className:"card-deck justify-content-around",children:e&&e.map((function(t,e){return Object(n.jsx)(p,{itemData:t},e)}))})},N=c(17),v=(c(29),N.a.initializeApp({apiKey:"AIzaSyDw-rnDZnHzVsB8iT6PKy3VBPDjmGyF8p8",authDomain:"the-tent--react-proyect.firebaseapp.com",projectId:"the-tent--react-proyect",storageBucket:"the-tent--react-proyect.appspot.com",messagingSenderId:"1083262875967",appId:"1:1083262875967:web:44b945ebd514f67f97fb8a"})),I=function(){return N.a.firestore(v)},y=function(){var t=Object(s.useState)(null),e=Object(d.a)(t,2),c=e[0],a=e[1];return Object(s.useEffect)((function(){I().collection("items").get().then((function(t){0===t.size&&console.log("No results");var e=t.docs.map((function(t){return Object(m.a)({id:t.id},t.data())}));a(e)}))}),[]),Object(n.jsx)("div",{className:"container",children:Object(n.jsx)(C,{data:c})})},B=function(t){var e=t.itemData,c=Object(s.useContext)(b),a=c.isInCart,i=c.addItem;return e&&Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("div",{className:"row justify-content-center",children:Object(n.jsx)("h1",{className:"mt-4",children:e.title})}),Object(n.jsxs)("div",{className:"row justify-content-between p-2",children:[Object(n.jsx)("img",{src:e.src,className:"m-2 col-5",width:"100",alt:"Descripcion de producto"}),Object(n.jsxs)("div",{className:"col-5 m-2",children:[Object(n.jsx)("h3",{children:e.title}),Object(n.jsx)("h4",{className:"text-muted",children:e.category}),Object(n.jsx)("p",{children:e.description}),Object(n.jsxs)("h3",{className:"text-center",children:[Object(n.jsx)("img",{src:f,width:"32",alt:"Coin Logo"})," ",e.price]}),a(e.id)?Object(n.jsx)(g,{}):Object(n.jsx)(x,{itemData:e,handlerClick:i})]})]})]})},F=(c(45),function(){var t=Object(s.useState)(null),e=Object(d.a)(t,2),c=e[0],a=e[1],i=Object(j.g)().itemId;return Object(s.useEffect)((function(){I().collection("items").doc(i.substr(1)).get().then((function(t){0===t&&console.log("No results"),console.log("Item Found!");var e=Object(m.a)({id:t.id},t.data());a(e)})).catch((function(t){console.log("Ocurrio un error: "+t)}))}),[]),Object(n.jsx)("div",{id:"itemDetail",className:"container justify-content-center mt-4",children:Object(n.jsx)(B,{itemData:c})})}),S=function(){var t=Object(j.g)().categoryId,e=Object(s.useState)(null),c=Object(d.a)(e,2),a=c[0],i=c[1];return Object(s.useEffect)((function(){var e=t.substr(1);I().collection("items").where("category","==",e).limit(3).get().then((function(t){0===t.size&&console.log("No results");var e=t.docs.map((function(t){return Object(m.a)({id:t.id},t.data())}));i(e)}))}),[t]),Object(n.jsx)("div",{className:"container",children:Object(n.jsx)(C,{data:a})})},E=(c(46),function(t){var e=t.itemData,c=t.itemId,i=t.handlerClick,r=e&&e.cartcount,o=Object(s.useState)(!1),j=Object(d.a)(o,2),l=j[0],b=j[1],u=Object(s.useState)(!1),A=Object(d.a)(u,2),O=A[0],h=A[1],m=Object(s.useState)(!1),x=Object(d.a)(m,2),g=x[0],f=x[1],p=Object(s.useState)(0),C=Object(d.a)(p,2),N=C[0],v=C[1];return Object(s.useEffect)((function(){h(N>=r),b(N<=0),f(N<=0)}),[N]),Object(n.jsxs)(a.a.Fragment,{children:[Object(n.jsxs)("div",{className:"row justify-content-center align-items-center",children:[Object(n.jsx)("button",{className:"countersButtons rounded-circle",disabled:l,type:"button",onClick:function(){N>0&&v(N-1)},children:"-"}),Object(n.jsx)("h4",{children:N}),Object(n.jsx)("button",{className:"countersButtons rounded-circle",disabled:O,type:"button",onClick:function(){N<r&&v(N+1)},children:"+"})]}),Object(n.jsx)("div",{className:"row justify-content-center",children:Object(n.jsx)("button",{type:"button",disabled:g,onClick:function(){return i(c,N)},className:"btn btn-danger text-center",children:"Delete Items"})})]})}),k=function(){var t=Object(s.useContext)(b),e=t.itemsInCart,c=t.totalPrice,i=t.removeItem,r=t.clearCart,j=Object(s.useState)([]),u=Object(d.a)(j,2),A=u[0],O=u[1],h={userName:"Comprador",phone:32154896,email:"compratuti@elmail"};Object(s.useEffect)((function(){console.log(A)}),[A]);var m=function(){var t=I();t.collection("items").where(N.a.firestore.FieldPath.documentId(),"in",e.map((function(t){return t.id}))).get().then((function(c){var n=t.batch(),s=[];c.docs.forEach((function(t,c){t.data().stock>=e[c].cartcount?n.update(t.ref,{stock:t.data().stock-e[c].cartcount}):(alert("We are out of stock of: "+t.data().title),s.push.apply(s,s.concat([t.data()])))})),0===s.length&&n.commit()}))};return Object(n.jsxs)("div",{id:"cart",className:"container",children:[Object(n.jsx)("div",{className:"row justify-content-center mt-5",children:Object(n.jsx)("h1",{id:"cart--title",children:"YOUR CART"})}),Object(n.jsx)("div",{className:"row",children:Object(n.jsxs)("table",{className:"table text-center mt-4",children:[Object(n.jsx)("thead",{children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{}),Object(n.jsx)("th",{children:"Item"}),Object(n.jsx)("th",{children:"Price per Unit"}),Object(n.jsx)("th",{children:"Count"}),Object(n.jsx)("th",{children:"Total"}),Object(n.jsx)("th",{})]})}),Object(n.jsx)("tbody",{children:e.length?e.map((function(t,e){return Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{children:Object(n.jsx)(o.b,{to:"/item:".concat(t.id),children:Object(n.jsx)("img",{src:t.src,className:"rounded-circle",width:"70",height:"70",alt:"Descripcion de producto"})})}),Object(n.jsx)("td",{children:Object(n.jsxs)(o.b,{to:"/item:".concat(t.id),children:[t.title,Object(n.jsx)("br",{}),Object(n.jsx)("h5",{className:"category--description",children:t.category})]})}),Object(n.jsxs)("td",{children:[Object(n.jsx)("img",{src:f,width:"27",alt:"Coin Logo"}),t.price]}),Object(n.jsx)("td",{children:t.cartcount}),Object(n.jsxs)("td",{children:[Object(n.jsx)("img",{src:f,width:"30",alt:"Coin Logo"}),t.cartcount*t.price]}),Object(n.jsx)("td",{children:Object(n.jsx)(E,{itemData:t,itemId:t.id,handlerClick:i})})]},e)})):Object(n.jsx)("tr",{children:Object(n.jsxs)("td",{colSpan:"6",children:[Object(n.jsx)("h3",{children:"There is nothing around here"}),Object(n.jsx)(o.b,{to:"./",children:Object(n.jsx)("button",{id:"cart--defaultButton",type:"button",className:"btn btn-success btn-lg text-center",children:"Lets Go Shopping!"})})]})})}),Object(n.jsx)("tfoot",{children:Object(n.jsx)("tr",{children:e.length?Object(n.jsxs)(a.a.Fragment,{children:[Object(n.jsx)("td",{children:Object(n.jsx)("button",{id:"cart--clearButton",type:"button",onClick:function(){return r()},className:"btn btn-danger text-center",children:"Clear Cart"})}),Object(n.jsx)("td",{colSpan:"4",children:Object(n.jsxs)("h3",{id:"cart--totalPrice",children:["TOTAL ",Object(n.jsx)("img",{src:f,width:"35",alt:"Coin Logo"}),c]})}),Object(n.jsx)("td",{children:Object(n.jsx)("button",{id:"cart--buyButton",type:"button",onClick:function(){return function(){var t={buyer:h,items:e,date:N.a.firestore.Timestamp.fromDate(new Date),total:c};I().collection("orders").add(t).then((function(t){var e=t.id;O([].concat(Object(l.a)(A),[e])),m()})).catch((function(t){return console.log("Ocurrio un error: ",t)})).finally((function(){console.log("Compra exitosa, su codigo de orden es: ",A),r()}))}()},className:"btn btn-success text-center",children:"\xa1BUY!"})})]}):Object(n.jsx)("td",{})})})]})})]})},D=a.a.createContext(),w=function(t){var e=t.children,c=Object(s.useState)({userName:"Comprador",phone:32154896,email:"compratuti@elmail"}),a=Object(d.a)(c,2),i=a[0],r=a[1],o=Object(s.useState)({buyer:i,items:{},date:0,total:0}),j=Object(d.a)(o,2),l=j[0],b=j[1];return Object(n.jsx)(D.Provider,{value:{order:l,setOrder:b,userData:i,setUserData:r},children:e})};c(47);var U=function(){return Object(n.jsx)("div",{className:"App",children:Object(n.jsx)(o.a,{children:Object(n.jsx)(w,{children:Object(n.jsxs)(u,{children:[Object(n.jsx)(h,{}),Object(n.jsx)(j.a,{from:"/Proyecto-ReactJS/",to:"/"}),Object(n.jsx)(j.d,{children:Object(n.jsxs)(a.a.Fragment,{children:[Object(n.jsx)(j.b,{exact:!0,path:"/",children:Object(n.jsx)(y,{})}),Object(n.jsx)(j.b,{exact:!0,path:"/category:categoryId",children:Object(n.jsx)(S,{})}),Object(n.jsx)(j.b,{path:"/item:itemId",children:Object(n.jsx)(F,{})}),Object(n.jsx)(j.b,{path:"/cart",children:Object(n.jsx)(k,{})})]})})]})})})})},T=function(t){t&&t instanceof Function&&c.e(3).then(c.bind(null,49)).then((function(e){var c=e.getCLS,n=e.getFID,s=e.getFCP,a=e.getLCP,i=e.getTTFB;c(t),n(t),s(t),a(t),i(t)}))};r.a.render(Object(n.jsx)(a.a.StrictMode,{children:Object(n.jsx)(U,{})}),document.getElementById("root")),T()}},[[48,1,2]]]);
//# sourceMappingURL=main.b25f774d.chunk.js.map